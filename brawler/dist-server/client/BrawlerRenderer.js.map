{"version":3,"sources":["../../src/client/BrawlerRenderer.js"],"names":["PIXI","require","game","BrawlerRenderer","gameEngine","clientEngine","sprites","fighterSpriteScale","pixelsPerSpaceUnit","window","innerWidth","spaceWidth","innerHeight","spaceHeight","viewportWidth","viewportHeight","setDimensions","stage","Container","document","readyState","onDOMLoaded","addEventListener","bind","Promise","resolve","reject","loader","add","Object","keys","ASSETPATHS","map","x","name","url","load","isReady","setupStage","textures","IDLE","values","resources","idleSheet","JUMP","jumpSheet","FIGHT","meleeSheet","RUN","runSheet","DIE","dieSheet","DINO_IDLE","dinoIdleSheet","DINO_WALK","dinoWalkSheet","DINO_RUN","dinoRunSheet","DINO_JUMP","dinoJumpSheet","DINO_DIE","dinoDieSheet","isTouchDevice","body","classList","isMacintosh","isWindows","emit","renderer","resize","backgroundSprite","Sprite","background","texture","width","height","addChild","autoDetectRenderer","querySelector","appendChild","view","obj","sprite","platformSprite","extras","TilingSprite","platform","id","position","set","y","fighterSprite","AnimatedSprite","scale","anchor","destroy","t","dt","world","forEachObject","spriteOffsetY","Fighter","isDino","ACTIONS","action","textureCount","length","image","Math","floor","progress","gotoAndStop","direction","playerId","getElementById","innerHTML","kills","render","Renderer","navigator","indexOf","maxTouchPoints"],"mappings":"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","sourcesContent":["import { Renderer } from 'lance-gg';\nimport Fighter from './../common/Fighter';\n\nlet PIXI = require('pixi.js');\nlet game = null;\n\nexport default class BrawlerRenderer extends Renderer {\n\n    constructor(gameEngine, clientEngine) {\n        super(gameEngine, clientEngine);\n        game = gameEngine;\n        this.sprites = {};\n        this.fighterSpriteScale = 1;\n    }\n\n    get ASSETPATHS() {\n        return {\n            background: 'assets/deserttileset/png/BG.png',\n            platform: 'assets/deserttileset/png/Tile/2.png',\n            idleSheet: 'assets/adventure_girl/png/Idle.json',\n            jumpSheet: 'assets/adventure_girl/png/Jump.json',\n            meleeSheet: 'assets/adventure_girl/png/Melee.json',\n            runSheet: 'assets/adventure_girl/png/Run.json',\n            dieSheet: 'assets/adventure_girl/png/Dead.json',\n            dinoIdleSheet: 'assets/dino/png/Idle.json',\n            dinoJumpSheet: 'assets/dino/png/Jump.json',\n            dinoWalkSheet: 'assets/dino/png/Walk.json',\n            dinoRunSheet: 'assets/dino/png/Run.json',\n            dinoDieSheet: 'assets/dino/png/Dead.json'\n        };\n    }\n\n    // expand viewport to maximize width or height\n    setDimensions() {\n        this.pixelsPerSpaceUnit = window.innerWidth / this.gameEngine.spaceWidth;\n        if (window.innerHeight < game.spaceHeight * this.pixelsPerSpaceUnit) {\n            this.pixelsPerSpaceUnit = window.innerHeight / game.spaceHeight;\n        }\n        this.viewportWidth = game.spaceWidth * this.pixelsPerSpaceUnit;\n        this.viewportHeight = game.spaceHeight * this.pixelsPerSpaceUnit;\n    }\n\n    // initialize renderer.\n    init() {\n        this.setDimensions();\n        this.stage = new PIXI.Container();\n\n        if (document.readyState === 'complete' || document.readyState === 'loaded' || document.readyState === 'interactive')\n            this.onDOMLoaded();\n        else\n            document.addEventListener('DOMContentLoaded', this.onDOMLoaded.bind(this));\n\n        return new Promise((resolve, reject) => {\n            PIXI.loader.add(Object.keys(this.ASSETPATHS).map((x) => {\n                return {\n                    name: x,\n                    url: this.ASSETPATHS[x]\n                };\n            }))\n            .load(() => {\n                this.isReady = true;\n                this.setupStage();\n\n                this.textures = {\n                    IDLE: Object.values(PIXI.loader.resources.idleSheet.textures),\n                    JUMP: Object.values(PIXI.loader.resources.jumpSheet.textures),\n                    FIGHT: Object.values(PIXI.loader.resources.meleeSheet.textures),\n                    RUN: Object.values(PIXI.loader.resources.runSheet.textures),\n                    DIE: Object.values(PIXI.loader.resources.dieSheet.textures),\n                    DINO_IDLE: Object.values(PIXI.loader.resources.dinoIdleSheet.textures),\n                    DINO_WALK: Object.values(PIXI.loader.resources.dinoWalkSheet.textures),\n                    DINO_RUN: Object.values(PIXI.loader.resources.dinoRunSheet.textures),\n                    DINO_JUMP: Object.values(PIXI.loader.resources.dinoJumpSheet.textures),\n                    DINO_DIE: Object.values(PIXI.loader.resources.dinoDieSheet.textures)\n                };\n\n                if (isTouchDevice()) document.body.classList.add('touch');\n                else if (isMacintosh()) document.body.classList.add('mac');\n                else if (isWindows()) document.body.classList.add('pc');\n\n                resolve();\n                this.gameEngine.emit('renderer.ready');\n            });\n        });\n\n    }\n\n    // add background sprite\n    setupStage() {\n        window.addEventListener('resize', () => {\n            this.setDimensions();\n            this.renderer.resize(this.viewportWidth, this.viewportHeight);\n        });\n        this.stage.backgroundSprite = new PIXI.Sprite(PIXI.loader.resources.background.texture);\n        this.stage.backgroundSprite.width = this.viewportWidth;\n        this.stage.backgroundSprite.height = this.viewportHeight;\n        this.stage.addChild(this.stage.backgroundSprite);\n    }\n\n    onDOMLoaded() {\n        this.renderer = PIXI.autoDetectRenderer(this.viewportWidth, this.viewportHeight);\n        document.body.querySelector('.pixiContainer').appendChild(this.renderer.view);\n    }\n\n    // add a single platform game object\n    addPlatform(obj) {\n        let sprite = new PIXI.Container();\n        sprite.platformSprite = new PIXI.extras.TilingSprite(\n            PIXI.loader.resources.platform.texture,\n            obj.width * this.pixelsPerSpaceUnit,\n            obj.height * this.pixelsPerSpaceUnit\n        );\n        sprite.addChild(sprite.platformSprite);\n        this.sprites[obj.id] = sprite;\n        sprite.position.set(obj.position.x, obj.position.y);\n        this.stage.addChild(sprite);\n    }\n\n    // add a single fighter game object\n    addFighter(obj) {\n        let sprite = new PIXI.Container();\n        sprite.fighterSprite = new PIXI.extras.AnimatedSprite(this.textures.IDLE);\n        this.fighterSpriteScale = obj.height * this.pixelsPerSpaceUnit / sprite.fighterSprite.height;\n        sprite.fighterSprite.scale.set(this.fighterSpriteScale, this.fighterSpriteScale);\n        sprite.fighterSprite.anchor.set(0.2, 0.0);\n        sprite.addChild(sprite.fighterSprite);\n        this.sprites[obj.id] = sprite;\n        sprite.position.set(obj.position.x, obj.position.y);\n        this.stage.addChild(sprite);\n    }\n\n    // remove a fighter\n    removeFighter(obj) {\n        let sprite = this.sprites[obj.id];\n        if (sprite) {\n            if (sprite.fighterSprite) sprite.fighterSprite.destroy();\n            sprite.destroy();\n        }\n    }\n\n    // draw all game objects\n    draw(t, dt) {\n        super.draw(t, dt);\n\n        if (!this.isReady) return; // assets might not have been loaded yet\n\n        game.world.forEachObject((id, obj) => {\n            let sprite = this.sprites[obj.id];\n            let spriteOffsetY = 0;\n            if (obj instanceof Fighter) {\n                if (obj.isDino) {\n                    sprite.fighterSprite.textures = this.textures['DINO_' + Fighter.ACTIONS[obj.action]];\n                    spriteOffsetY = -3;\n                } else {\n                    sprite.fighterSprite.textures = this.textures[Fighter.ACTIONS[obj.action]];\n                    spriteOffsetY = -1;\n                }\n                let textureCount = sprite.fighterSprite.textures.length;\n                let image = Math.floor((100 - obj.progress)/100 * textureCount);\n                sprite.fighterSprite.gotoAndStop(image);\n\n                sprite.fighterSprite.scale.set(obj.direction * this.fighterSpriteScale, this.fighterSpriteScale);\n                sprite.fighterSprite.anchor.x = obj.direction==1?0.2:0.8;\n\n                if (obj.playerId === this.gameEngine.playerId)\n                    document.getElementById('killsStatus').innerHTML = `kills: ${obj.kills}`;\n            }\n            sprite.x = obj.position.x * this.pixelsPerSpaceUnit;\n            sprite.y = this.viewportHeight - (obj.position.y + obj.height + spriteOffsetY) * this.pixelsPerSpaceUnit;\n        });\n\n        this.renderer.render(this.stage);\n    }\n}\n\nfunction isMacintosh() { return navigator.platform.indexOf('Mac') > -1; }\nfunction isWindows() { return navigator.platform.indexOf('Win') > -1; }\nfunction isTouchDevice() { return 'ontouchstart' in window || navigator.maxTouchPoints; }\n"],"file":"BrawlerRenderer.js"}